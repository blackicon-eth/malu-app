function v_callBody(call, context) {
    return {
        method: "v_call",
        params: [call, context],
        id: 1,
        jsonrpc: "2.0",
    };
}
export async function v_call(call, context, url = "http://127.0.0.1:3000") {
    const response = await fetch(url, {
        method: "POST",
        body: JSON.stringify(v_callBody(call, context)),
        headers: { "Content-Type": "application/json" },
    });
    if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
    }
    const response_json = await response.json();
    assertObject(response_json);
    if ("error" in response_json) {
        throw new Error(`Error response: ${response_json.error.message || "unknown error"}`);
    }
    return response_json;
}
function assertObject(x) {
    if (typeof x !== "object") {
        throw new Error("Expected object");
    }
}
